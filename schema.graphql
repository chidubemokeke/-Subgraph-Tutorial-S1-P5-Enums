# Enum for Marketplaces
# This defines an enumeration called Marketplace
enum Marketplace {
  OpenSea # Represents when a CryptoCoven NFT is transferred from OpenSea marketplace
  SeaPort # Represents when a CryptoCoven NFT is transferred from SeaPort marketplace
  LooksRare # Represents when a CryptoCoven NFT is transferred from LookRare marketplace
  OxProtocol # Represents when a CryptoCoven NFT is transferred from OxProtocol marketplace
  Blur # Represents when a CryptoCoven NFT is transferred from Blur marketplace
  Rarible # Represents when a CryptoCoven NFT is transferred from Rarible marketplace
  X2Y2 # Represents when a CryptoCoven NFT is transferred from X2Y2 marketplace
  Unknown # Represents when a CryptoCoven NFT is transferred from an unknown marketplace
}

# Define a Transfer entity representing the transfer of NFTs
type Transfer @entity(immutable: true) {
  id: ID! # Unique identifier for the transfer event
  from: Account! # Reference to the Account entity sending the NFT
  to: Account! # Reference to the Account entity receiving the NFT
  tokenId: BigInt! # The unique token ID for the transferred NFT
  value: BigInt! # Value associated with the transfer
  marketPlace: Marketplace! # The marketplace or contract address where the transfer took place
  txHash: Bytes! # Transaction hash associated with the transfer
}

# Define an Account entity representing a user account
type Account @entity {
  id: ID! # Unique identifier for the account, typically the address
  sentTransfers: [Transfer!]! @derivedFrom(field: "from") # Array of transfers sent by the account
  receivedTransfers: [Transfer!]! @derivedFrom(field: "to") # Array of transfers received by the account
  totalSpent: BigInt! # Total value of tokens purchased by the account
  sentCount: Int! # Number of transfer events sent by the account
  receivedCount: Int! # Number of transfer events received by the account
  mintCount: Int # Number of tokens minted (if applicable)
}

type Transaction @entity {
  id: ID! # Unique identifier for the transaction
  # Aggregated data fields for the transaction

  "Total amount sold across all transactions"
  totalSalesVolume: BigInt!
  "Average price of NFTs sold"
  averageSalePrice: BigDecimal!
  "Total number of NFT sales"
  totalSalesCount: BigInt!
  "Highest sale price of an NFT"
  highestSalePrice: BigInt!
  "Lowest sale price of an NFT"
  lowestSalePrice: BigInt!
}
